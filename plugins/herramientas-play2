import fetch from 'node-fetch';

let handler = async (m, { conn, usedPrefix, command, text }) => {
  if (!text) return m.reply(`ğŸ‘‘ Dime el nombre de la mÃºsica encantada que quieres que busque.`);

  await m.react('ğŸ•’'); // ReacciÃ³n mientras busca

  try {
    let api = await (await fetch(`https://delirius-apiofc.vercel.app/search/ytsearch?q=${encodeURIComponent(text)}`)).json();
    let result = api.data[0];

    let txt = `${result.title}`;

    await conn.sendMessage(m.chat, {
      image: { url: result.image },
      caption: txt,
      footer: dev,
      buttons: [
        {
          buttonId: `.ytmp4 ${result.url}`,
          buttonText: { displayText: 'Aceptar Descarga' }
        }
      ],
      viewOnce: true,
      headerType: 4
    }, { quoted: m });

    await m.react('âœ…'); // ReacciÃ³n al terminar
  } catch (e) {
    await m.react('âœ–ï¸');
    m.reply(`Error: ${e.message}`);
  }
};

handler.command = ['play2'];
export default handler;